<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>Exercice 5 - Canvas</title>
</head>
<body>

  <canvas id="canvas"></canvas>

  <script src="assets\js\jquery-3.3.1.min.js"></script>
  <script>
      // Set des dimensions du canvas
      $("#canvas").attr("width", 1350);
      $("#canvas").attr("height", 570);

      var canvas;
      var ctx;
      // Var pour le déplacement sur x et y
      var dx = 10;
      var dy = 10;
      // Pos initiale du carré
      var x = 670;
      var y = 270;

    // Au chargement de la page
    window.onload=function()
    {
      // Mis en place d'un trigger avec pour event une touche du clavier
      // Et lance la finction pressArrowKeys
      window.addEventListener('keydown', pressArrowKeys, true);
      // Récup de l'id du canvas
      canvas=document.getElementById("canvas");
      // ctx: contexte de dessin bi-dimensionnel (2d) sur le canevas
      ctx = canvas.getContext("2d");
      // Fct qui lancera la fct draw toute les 10ms
      return setInterval(draw, 10);
    }
    // Fct détectant la touche du clavier
    function pressArrowKeys()
    {
      switch (event.keyCode) {
        case 38: //Haut
          if ((y -= dy) < 0){
            y = 560;
          } else {
            y -= dy;
          }
          break;
        case 40: //Bas
          if ((y += dy) > 560){
            y = 10;
          } else {
            y += dy;
          }
          break;
        case 37: //Gauche
          if ((x -= dx) < 0){
            x = 1340;
          } else {
            x -= dx;
          }
          break;
        case 39: //Droite
          if ((x += dx) > 1340) {
            x = 0;
          } else {
            x += dx;
          }
          break;
      }
    }
    // Fct qui dessine le carré
    function draw()
    {
      // On nettoie tout sur la hauteur et la largeur du canvas
      ctx.clearRect(0, 0, 1354, 570);
      // Ouvre un nouveau chemin permettant la création d'une nouvel élément
      ctx.beginPath();
      // Création du rectangle
      ctx.rect(x, y, 20, 20);
      // Remplie le carré
      ctx.fill();
    }
  </script>
</body>
</html>
